!function(e,t){function n(e){S&&console.log(e)}function a(e){var t="";"undefined"!=typeof e.attr("id")?t=e.attr("id"):"undefined"!=typeof e.attr("name")?t=e.attr("name"):"undefined"!=typeof e.attr("class")&&(t=e.attr("class").split(" ").join("."));var n=[l.namespace,m];return""!==t&&n.push(t),n.join(".")}function i(t,a){n("[SAVE] StorageKey: "+a);var i={fields:{},radios:{},checkboxes:{},dropdowns:{}};t.find('input[type="text"]').each(function(){var t=e(this).attr("name"),a=e(this).val();i.fields[t]=a,n("[SAVE] [Text input]  name: "+t+" value: "+a)}),t.find('input[type="radio"]:checked').each(function(){var t=e(this).attr("name"),a=e(this).val();i.radios[t]=a,n("[SAVE] [Radio button]  name: "+t+" value: "+a)}),t.find('input[type="checkbox"]:checked').each(function(){var t=e(this).attr("name"),a=e(this).val();i.checkboxes[t]=a,n("[SAVE] [Checkbox]  name: "+t+" value: "+a)}),t.find("select").each(function(){var t=e(this).attr("name"),a=e(this).val();i.dropdowns[t]=a,n("[SAVE] [Dropdown]  name: "+t+" selected: "+a)});var r=JSON.stringify(i);p[a]=r,n("[SAVE] JSON: "+p[a])}function r(t,a){var i,r,o;if(n("[LOAD] StorageKey: "+a),"undefined"!=typeof p[a]){n("[LOAD] JSON: "+p[a]);for(var c=JSON.parse(p[a]),s=Object.keys(c.fields),u=0;u<s.length;u++)i=s[u],r=c.fields[i],o='input[name="'+i+'"]',t.find(o).val(r),n("[LOAD] [Text input]  name: "+i+" value: "+r);t.find('input[type="radio"]').each(function(){e(this).prop("checked",!1)});for(var d=Object.keys(c.radios),u=0;u<d.length;u++)i=d[u],r=c.radios[i],o='input[name="'+i+'"][value="'+r+'"]',t.find(o).prop("checked",!0),n("[LOAD] [Radio button]  name: "+i+" value: "+r);t.find('input[type="checkbox"]').each(function(){e(this).prop("checked",!1)});for(var h=Object.keys(c.checkboxes),u=0;u<h.length;u++)i=h[u],r=c.checkboxes[i],o='input[name="'+i+'"][value="'+r+'"]',t.find(o).prop("checked",!0),n("[LOAD] [Checkbox]  name: "+i+" value: "+r);for(var v=Object.keys(c.dropdowns),u=0;u<v.length;u++)i=v[u],r=c.dropdowns[i],o='select[name="'+i+'"]',t.find(o).val(r).triggerHandler("change"),n("[LOAD] [Dropdown]  name: "+i+" selected: "+r)}}function o(t){var a=!0;return t.find('input[type="text"]').each(function(){return e(this).val()!=e(this).prop("defaultValue")?(a=!1,n("[ISPRISTINE] [Text input] "+e(this).attr("name")+" is dirty"),!1):void 0}),a===!1?!1:(t.find('input[type="radio"], input[type="checkbox"]').each(function(){return this.checked!=e(this).prop("defaultChecked")?(a=!1,n("[ISPRISTINE] [Radio/Checkbox] "+e(this).attr("name")+" is dirty"),!1):void 0}),a===!1?!1:(t.find("select").each(function(){for(var t=0;t<this.length;t++){var i=this.options[t];if(i.selected!=i.defaultSelected)return a=!1,n("[ISPRISTINE] [Select] "+e(this).attr("name")+" is dirty"),!1}}),a))}function c(t,a){n("[DIFF] StorageKey: "+a);var i=!1;if("undefined"==typeof p[a])return!0;n("[DIFF] JSON: "+p[a]);var r=JSON.parse(p[a]);return t.find('input[type="text"]').each(function(){var t=e(this).attr("name"),a=e(this).val();return r.fields[t]!=a?(i=!0,n("[DIFF] [Text input Live]  name: "+t+" value: "+a),n("[DIFF] [Text input Saved]  name: "+t+" value: "+r.fields[t]),!1):void 0}),i===!0?i:(t.find('input[type="radio"]:checked').each(function(){var t=e(this).attr("name"),a=e(this).val();return r.radios[t]!=a?(i=!0,n("[DIFF] [Radio button Live]  name: "+t+" value: "+a),n("[DIFF] [Radio button Saved]  name: "+t+" value: "+r.radios[t]),!1):void 0}),i===!0?i:(t.find('input[type="checkbox"]:checked').each(function(){var t=e(this).attr("name"),a=e(this).val();return r.checkboxes[t]!=a?(i=!0,n("[DIFF] [Checkbox Live]  name: "+t+" value: "+a),n("[DIFF] [Checkbox Saved]  name: "+t+" value: "+r.checkboxes[t]),!1):void 0}),i===!0?i:(t.find("select").each(function(){var t=e(this).attr("name"),a=e(this).children(":selected").val();return r.dropdowns[t]!=a?(i=!0,n("[DIFF] [Dropdown Live]  name: "+t+" value: "+a),n("[DIFF] [Dropdown Saved]  name: "+t+" value: "+r.dropdowns[t]),!1):void 0}),i)))}function s(e){p.removeItem(e)}function u(e,n){var a=t.setInterval(function(){i(e,n)},l.saveInterval);y[n]=a}function d(e){t.clearInterval(y[e])}function h(e){try{var a=t[e],i="__storage_test__";return a.setItem(i,i),a.removeItem(i),n("[SUPPORTS][TRUE] Type: "+e),!0}catch(r){return n("[SUPPORTS][FALSE] Type: "+e),!1}}function v(e){return n("[GET] StorageKey: "+e),p[e]}function f(e,t){return n("[SET] StorageKey: "+e+" Data: "+t),t?void(p[e]=t):void n("[SET][ERROR] Data is "+t)}var p,l,S=!0,m=t.location.pathname,y=[],k={namespace:"savr",saveInterval:"1000",clearOnSubmit:!0,storageType:"localStorage"};n("[SAVR] Initialized!");var b=function(e){return"undefined"==typeof p[e]?(n("[EXISTS][FALSE] StorageKey: "+e),!1):(n("[EXISTS][TRUE] StorageKey: "+e),!0)};e.fn.savr=function(S,m){if(l=e.extend({},k,m),p=t[l.storageType],m&&n("[SAVR] Options set: "+JSON.stringify(l,null,2)),"isSupported"==S)return h(l.storageType);if(!h(l.storageType))return this;switch(S){case"exists":var y=!0;return this.each(function(){var t=a(e(this));return y=b(t),y?void 0:!1}),y;case"isPristine":var I=!0;return this.each(function(){return I=o(e(this)),I?void 0:!1}),I;case"diff":var x=!1;return this.each(function(){var t=a(e(this));return x=c(e(this),t),x?!1:void 0}),x;case"export":var g={};return this.each(function(){var t=a(e(this));g[t]=v(t)}),g}return this.each(function(){var t=a(e(this));switch(n("[SAVR] Action: "+S+" StorageKey: "+t),S){case"start":u(e(this),t);break;case"stop":d(t);break;case"clear":s(t);break;case"save":i(e(this),t);break;case"load":r(e(this),t);break;case"import":f(t,l.data[t])}})}}(jQuery,window);